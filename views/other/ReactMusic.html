<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React + Redux 简易版QQ音乐webApp | FED</title>
    <meta name="description" content="Death is our final destination. enjoy the journey!">
    <link rel="icon" href="/my-blog/favicon.ico">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.8704f1fe.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.fa2e1c25.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.7c27518b.js" as="script"><link rel="preload" href="/my-blog/assets/js/15.3e9c72ce.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.9226125a.js"><link rel="prefetch" href="/my-blog/assets/js/11.045d85b7.js"><link rel="prefetch" href="/my-blog/assets/js/12.b3a4c07c.js"><link rel="prefetch" href="/my-blog/assets/js/13.01f6499a.js"><link rel="prefetch" href="/my-blog/assets/js/14.13f92e6a.js"><link rel="prefetch" href="/my-blog/assets/js/16.c3d5f18d.js"><link rel="prefetch" href="/my-blog/assets/js/17.a35f7d98.js"><link rel="prefetch" href="/my-blog/assets/js/18.10e85e37.js"><link rel="prefetch" href="/my-blog/assets/js/19.99194444.js"><link rel="prefetch" href="/my-blog/assets/js/20.c92be5bf.js"><link rel="prefetch" href="/my-blog/assets/js/21.e5ecf1c3.js"><link rel="prefetch" href="/my-blog/assets/js/22.71df3343.js"><link rel="prefetch" href="/my-blog/assets/js/23.5e4652bf.js"><link rel="prefetch" href="/my-blog/assets/js/3.4e9785f1.js"><link rel="prefetch" href="/my-blog/assets/js/4.9a88cbb7.js"><link rel="prefetch" href="/my-blog/assets/js/5.3f1bf10f.js"><link rel="prefetch" href="/my-blog/assets/js/6.40f6c170.js"><link rel="prefetch" href="/my-blog/assets/js/7.24286e46.js"><link rel="prefetch" href="/my-blog/assets/js/8.33052e85.js"><link rel="prefetch" href="/my-blog/assets/js/9.658ade64.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.8704f1fe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">FED</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">干货</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-blog/views/technology/" class="nav-link">前端技术</a></li><li class="dropdown-item"><!----> <a href="/my-blog/views/essay/" class="nav-link">随笔</a></li><li class="dropdown-item"><!----> <a href="/my-blog/views/other/" class="nav-link router-link-active">其他</a></li></ul></div></div><div class="nav-item"><a href="/my-blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/guixianleng/my-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">干货</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-blog/views/technology/" class="nav-link">前端技术</a></li><li class="dropdown-item"><!----> <a href="/my-blog/views/essay/" class="nav-link">随笔</a></li><li class="dropdown-item"><!----> <a href="/my-blog/views/other/" class="nav-link router-link-active">其他</a></li></ul></div></div><div class="nav-item"><a href="/my-blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/guixianleng/my-blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>vue-components</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/views/" class="sidebar-link">🎉 移动端组件</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>知识点</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>实战项目</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/views/other/ReactMusic.html" class="active sidebar-link">React + Redux 简易版QQ音乐webApp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/views/other/ReactMusic.html#项目查看运行：" class="sidebar-link">项目查看运行：</a></li><li class="sidebar-sub-header"><a href="/my-blog/views/other/ReactMusic.html#功能：" class="sidebar-link">功能：</a></li><li class="sidebar-sub-header"><a href="/my-blog/views/other/ReactMusic.html#功能演示：" class="sidebar-link">功能演示：</a></li><li class="sidebar-sub-header"><a href="/my-blog/views/other/ReactMusic.html#功能实现介绍：" class="sidebar-link">功能实现介绍：</a></li><li class="sidebar-sub-header"><a href="/my-blog/views/other/ReactMusic.html#第一次react写项目" class="sidebar-link">第一次react写项目</a></li><li class="sidebar-sub-header"><a href="/my-blog/views/other/ReactMusic.html#react学习资源：" class="sidebar-link">react学习资源：</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-redux-简易版qq音乐webapp"><a href="#react-redux-简易版qq音乐webapp" aria-hidden="true" class="header-anchor">#</a> React + Redux 简易版QQ音乐webApp</h1> <h2 id="项目查看运行："><a href="#项目查看运行：" aria-hidden="true" class="header-anchor">#</a> 项目查看运行：</h2> <div class="language-shell extra-class"><pre class="language-text"><code>$ git clone https://github.com/guixianleng/react-music-webApp.git
$ cd react-music-webApp
$ npm install

$ npm run start 
</code></pre></div><p><a href="https://github.com/guixianleng/react-music-webApp" target="_blank" rel="noopener noreferrer">GitHub地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="功能："><a href="#功能：" aria-hidden="true" class="header-anchor">#</a> 功能：</h2> <ul><li>[x] 推荐
<ul><li>[x] 专辑歌曲列表</li> <li>[x] 专辑详情</li></ul></li> <li>[x] 排行榜
<ul><li>[x] QQ排行榜</li> <li>[x] 全球榜(假数据)</li></ul></li> <li>[x] 歌手
<ul><li>[x] 列表</li> <li>[x] 条件搜索</li></ul></li> <li>[x] 搜索功能
<ul><li>[x] 热门搜索</li> <li>[x] 自定义搜索</li></ul></li> <li>[x] 播放器
<ul><li>[x] 迷你播放器</li> <li>[x] 歌曲列表</li> <li>[x] 歌曲播放模式</li> <li>[x] 上一首</li> <li>[x] 下一首</li> <li>[x] 暂停</li> <li>[x] 进度条</li></ul></li> <li>[x] 换肤</li></ul> <h2 id="功能演示："><a href="#功能演示：" aria-hidden="true" class="header-anchor">#</a> 功能演示：</h2> <h3 id="_1-推荐"><a href="#_1-推荐" aria-hidden="true" class="header-anchor">#</a> 1.推荐</h3> <p><img src="https://github.com/guixianleng/images-store/blob/master/images/recommend.gif?raw=true" alt="推荐"></p> <h3 id="_2-排行榜"><a href="#_2-排行榜" aria-hidden="true" class="header-anchor">#</a> 2. 排行榜</h3> <p><img src="https://github.com/guixianleng/images-store/blob/master/images/rank.gif?raw=true" alt="排行榜"></p> <h3 id="_3-歌手"><a href="#_3-歌手" aria-hidden="true" class="header-anchor">#</a> 3. 歌手</h3> <p><img src="https://github.com/guixianleng/images-store/blob/master/images/singer.gif?raw=true" alt="歌手"></p> <h3 id="_4-搜索"><a href="#_4-搜索" aria-hidden="true" class="header-anchor">#</a> 4. 搜索</h3> <p><img src="https://github.com/guixianleng/images-store/blob/master/images/search.gif?raw=true" alt="搜索"></p> <h3 id="_5-播放器"><a href="#_5-播放器" aria-hidden="true" class="header-anchor">#</a> 5. 播放器</h3> <p><img src="https://github.com/guixianleng/images-store/blob/master/images/player.gif?raw=true" alt="播放器"></p> <h3 id="_6-换肤"><a href="#_6-换肤" aria-hidden="true" class="header-anchor">#</a> 6. 换肤</h3> <p><img src="https://github.com/guixianleng/images-store/blob/master/images/skin.gif?raw=true" alt="播放器"></p> <h2 id="功能实现介绍："><a href="#功能实现介绍：" aria-hidden="true" class="header-anchor">#</a> 功能实现介绍：</h2> <h3 id="_1-换肤功能"><a href="#_1-换肤功能" aria-hidden="true" class="header-anchor">#</a> 1. 换肤功能</h3> <p>该项目使用的是<code>styled-components</code>样式化组件，可以去<a href="https://www.styled-components.com/docs/basics" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>了解</p> <p>优点：</p> <ul><li>可以通过编写实际的CSS代码来设计组件样式，也不需要组件和样式之间的映射，即创建后就是一个正常的React组件，并且可以附加样式给当前组件。 优化react组件解耦.</li> <li>在一个组件内会将结构、样式和逻辑写在一起，有利于组件间的隔离。为了顺应组件化的潮流..</li> <li>使用<code>styled-components</code>不需要再使用className属性来控制样式，而是将样式写成更具语义化的组件的形式.</li> <li>使用style-components会随机生成一个class名称，这样不会污染到全局变量.</li></ul> <p>注意：</p> <p>引入全局样式引入，需要使用<code>createGlobalStyle</code>组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createGlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> GlobalStyle <span class="token operator">=</span> createGlobalStyle<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  ...
</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>然后再将定义的全局样式组件，放在 render() 中最外层元素下面</p> <p>换肤使用的是<code>ThemeProvider</code>组件，<a href="https://www.styled-components.com/docs/advanced#theming" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>有详细说明.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ThemeProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token punctuation">{</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">'#317c47'</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token string">'#317c47'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ThemeProvider theme<span class="token operator">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">...</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-better-scroll移动端scroll神器"><a href="#_2-better-scroll移动端scroll神器" aria-hidden="true" class="header-anchor">#</a> 2. better-scroll移动端scroll神器</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> BScroll <span class="token keyword">from</span> <span class="token string">'better-scroll'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">'../../baseUI/Loading/Loading'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounce <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../utils'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ScrollDiv<span class="token punctuation">,</span> PullUpLoading<span class="token punctuation">,</span> PullDownLoading <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./style'</span>


<span class="token keyword">class</span> <span class="token class-name">Scroll</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>scrollRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    direction<span class="token punctuation">:</span> <span class="token string">'vertical'</span><span class="token punctuation">,</span>
    click<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    refresh<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    onScroll<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    pullUpLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    pullDownLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function-variable function">pullUp</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">pullDown</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    bounceTop<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    bounceBottom<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 开启滚动方式</span>
    direction<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'vertical'</span><span class="token punctuation">,</span> <span class="token string">'horizontal'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    click<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span>
    <span class="token comment">// 事件派发</span>
    refresh<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span>
    onScroll<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>
    pullUp<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>
    pullDown<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>
    <span class="token comment">// 开启加载</span>
    pullUpLoading<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span> 
    pullDownLoading<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span>
    <span class="token comment">// 回弹</span>
    bounceTop<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span>
    bounceBottom<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 组件更新后，如果实例化了better-scroll并且需要刷新就调用refresh()函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>refresh <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Options 参数</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> direction<span class="token punctuation">,</span> click<span class="token punctuation">,</span> bounceTop<span class="token punctuation">,</span> bounceBottom <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token comment">// Events 事件</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> onScroll<span class="token punctuation">,</span> pullUp<span class="token punctuation">,</span> pullDown <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      scrollX<span class="token punctuation">:</span> direction <span class="token operator">===</span> <span class="token string">'horizontal'</span><span class="token punctuation">,</span>
      scrollY<span class="token punctuation">:</span> direction <span class="token operator">===</span> <span class="token string">'vertical'</span><span class="token punctuation">,</span>
      <span class="token comment">/**
       * 1 滚动的时候会派发scroll事件，会截流
       * 2滚动的时候实时派发scroll事件，不会截流。
       * 3除了实时派发scroll事件，在swipe的情况下仍然能实时派发scroll事件
       */</span>
      probeType<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      stopPropagation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 是否派发click事件</span>
      click<span class="token punctuation">:</span> click<span class="token punctuation">,</span>
      <span class="token comment">// 是否启用上下拉效果</span>
      bounce<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        top<span class="token punctuation">:</span> bounceTop<span class="token punctuation">,</span>
        bottom<span class="token punctuation">:</span> bounceBottom
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 监听滚动事件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll <span class="token operator">||</span> <span class="token operator">!</span>onScroll<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">scroll</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onScroll</span><span class="token punctuation">(</span>scroll<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleDealUp</span><span class="token punctuation">(</span>pullUp<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleDealDown</span><span class="token punctuation">(</span>pullDown<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 处理判断是否滑动到了底部</span>
  <span class="token function">handleDealUp</span> <span class="token punctuation">(</span><span class="token parameter">pullUp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll <span class="token operator">||</span> <span class="token operator">!</span>pullUp<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'scrollEnd'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span>maxScrollY <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">debounce</span><span class="token punctuation">(</span>pullUp<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'scrollEnd'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理判断用户的下拉动作</span>
  <span class="token function">handleDealDown</span> <span class="token punctuation">(</span><span class="token parameter">pullDown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll <span class="token operator">||</span> <span class="token operator">!</span>pullDown<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'touchEnd'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">pos</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">debounce</span><span class="token punctuation">(</span>pullDown<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'touchEnd'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 销毁</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 刷新</span>
  <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bScroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> pullUpLoading<span class="token punctuation">,</span> pullDownLoading<span class="token punctuation">,</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>ScrollDiv ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollRef<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;scroll-view&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* 顶部下拉刷新动画 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>PullDownLoading pullDown<span class="token operator">=</span><span class="token punctuation">{</span>pullDownLoading<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Loading<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Loading<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>PullDownLoading<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 上滑至底部加载动画 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>PullUpLoading pullUp<span class="token operator">=</span><span class="token punctuation">{</span>pullUpLoading<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Loading<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Loading<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>PullUpLoading<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ScrollDiv<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Scroll

</code></pre></div><h2 id="第一次react写项目"><a href="#第一次react写项目" aria-hidden="true" class="header-anchor">#</a> 第一次react写项目</h2> <p>感觉学到的东西还是挺多的，慢慢成长，逐渐积累吧！</p> <ul><li>务实自己js、css基础</li> <li>react入门成功</li> <li>redux的实现原理、组件化开发</li></ul> <h2 id="react学习资源："><a href="#react学习资源：" aria-hidden="true" class="header-anchor">#</a> react学习资源：</h2> <ul><li><a href="http://huziketang.mangojuice.top/books/react/" target="_blank" rel="noopener noreferrer">React.js小书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，react/redux介绍的很细</li> <li><a href="http://cn.redux.js.org/" target="_blank" rel="noopener noreferrer">Redux中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer">React中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5d085be0f265da1bac401937" target="_blank" rel="noopener noreferrer">技术胖React系列<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/5d3e3c42e51d45590a445c37" target="_blank" rel="noopener noreferrer">技术胖Redux系列<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/11/2019, 2:17:44 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/my-blog/views/article/tools.html" class="prev">
          🎉 Development Tools
        </a></span> <!----></p></div> </main></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/my-blog/assets/js/app.fa2e1c25.js" defer></script><script src="/my-blog/assets/js/2.7c27518b.js" defer></script><script src="/my-blog/assets/js/15.3e9c72ce.js" defer></script>
  </body>
</html>
